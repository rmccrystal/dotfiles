"use strict";!function(t,e){"function"==typeof define&&define.amd?define("pdfjs/shared/global",["exports"],e):e("undefined"!=typeof exports?exports:t.pdfjsSharedGlobal={})}(this,function(t){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n="undefined"==typeof window;e.PDFJS||(e.PDFJS={}),"undefined"!=typeof pdfjsVersion&&(e.PDFJS.version=pdfjsVersion),"undefined"!=typeof pdfjsVersion&&(e.PDFJS.build=pdfjsBuild),e.PDFJS.pdfBug=!1,t.globalScope=e,t.isWorker=n,t.PDFJS=e.PDFJS}),function(t,e){"function"==typeof define&&define.amd?define("pdfjs/shared/util",["exports","pdfjs/shared/global"],e):"undefined"!=typeof exports?e(exports,require("./global.js")):e(t.pdfjsSharedUtil={},t.pdfjsSharedGlobal)}(this,function(t,e){function n(t){B.verbosity>=B.VERBOSITY_LEVELS.infos&&console.log("Info: "+t)}function i(t){B.verbosity>=B.VERBOSITY_LEVELS.warnings&&console.log("Warning: "+t)}function r(t){console.log("Deprecated API usage: "+t)}function s(t){throw B.verbosity>=B.VERBOSITY_LEVELS.errors&&(console.log("Error: "+t),console.log(o())),new Error(t)}function o(){try{throw new Error}catch(t){return t.stack?t.stack.split("\n").slice(2).join("\n"):""}}function a(t,e){t||s(e)}function h(t){var e=t.indexOf("#"),n=t.indexOf("?"),i=Math.min(e>0?e:t.length,n>0?n:t.length);return t.substring(t.lastIndexOf("/",i)+1,i)}function c(t,e){return e?new URL(e,t).href:t}function u(t,e){try{var n=new URL(t);if(!n.origin||"null"===n.origin)return!1}catch(i){return!1}var r=new URL(e,n);return n.origin===r.origin}function l(t,e){if(!t)return!1;var n=/^[a-z][a-z0-9+\-.]*(?=:)/i.exec(t);if(!n)return e;switch(n=n[0].toLowerCase()){case"http":case"https":case"ftp":case"mailto":case"tel":return!0;default:return!1}}function d(t,e){var n=e&&e.url;t.href=t.title=n?m(n):"",n&&(g()&&(t.target=$[B.externalLinkTarget]),t.rel=B.externalLinkRel)}function f(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!1}),n}function p(t){var e;return function(){return t&&(e=Object.create(null),t(e),t=null),e}}function g(){switch(B.openExternalLinksInNewWindow&&(r('PDFJS.openExternalLinksInNewWindow, please use "PDFJS.externalLinkTarget = PDFJS.LinkTarget.BLANK" instead.'),B.externalLinkTarget===Z.NONE&&(B.externalLinkTarget=Z.BLANK),B.openExternalLinksInNewWindow=!1),B.externalLinkTarget){case Z.NONE:return!1;case Z.SELF:case Z.BLANK:case Z.PARENT:case Z.TOP:return!0}return i("PDFJS.externalLinkTarget is invalid: "+B.externalLinkTarget),B.externalLinkTarget=Z.NONE,!1}function m(t){return"string"!=typeof t?(i("The argument for removeNullCharacters must be a string."),t):t.replace(ct,"")}function v(t){a(null!==t&&"object"==typeof t&&void 0!==t.length,"Invalid argument for bytesToString");var e=t.length,n=8192;if(e<n)return String.fromCharCode.apply(null,t);for(var i=[],r=0;r<e;r+=n){var s=Math.min(r+n,e),o=t.subarray(r,s);i.push(String.fromCharCode.apply(null,o))}return i.join("")}function y(t){a("string"==typeof t,"Invalid argument for stringToBytes");for(var e=t.length,n=new Uint8Array(e),i=0;i<e;++i)n[i]=255&t.charCodeAt(i);return n}function _(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)}function b(t){for(var e=1,n=0;t>e;)e<<=1,n++;return n}function T(t,e){return t[e]<<24>>24}function I(t,e){return t[e]<<8|t[e+1]}function x(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}function O(){var t=new Uint8Array(2);t[0]=1;var e=new Uint16Array(t.buffer);return 1===e[0]}function E(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d"),n=e.createImageData(1,1);return"undefined"!=typeof n.data.buffer}function w(t){var e,n=t.length,i=[];if("þ"===t[0]&&"ÿ"===t[1])for(e=2;e<n;e+=2)i.push(String.fromCharCode(t.charCodeAt(e)<<8|t.charCodeAt(e+1)));else for(e=0;e<n;++e){var r=ft[t.charCodeAt(e)];i.push(r?String.fromCharCode(r):t.charAt(e))}return i.join("")}function R(t){return decodeURIComponent(escape(t))}function j(t){return unescape(encodeURIComponent(t))}function P(t){for(var e in t)return!1;return!0}function L(t){return"boolean"==typeof t}function C(t){return"number"==typeof t&&(0|t)===t}function S(t){return"number"==typeof t}function k(t){return"string"==typeof t}function M(t){return t instanceof Array}function D(t){return"object"==typeof t&&null!==t&&void 0!==t.byteLength}function A(){var t={};return t.promise=new Promise(function(e,n){t.resolve=e,t.reject=n}),t}function N(t,e,n){this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackIndex=1,this.postMessageTransfers=!0;var i=this.callbacksCapabilities=Object.create(null),r=this.actionHandler=Object.create(null);this._onComObjOnMessage=function(t){var e=t.data;if(e.targetName===this.sourceName)if(e.isReply){var o=e.callbackId;if(e.callbackId in i){var a=i[o];delete i[o],"error"in e?a.reject(e.error):a.resolve(e.data)}else s("Cannot resolve callback "+o)}else if(e.action in r){var h=r[e.action];if(e.callbackId){var c=this.sourceName,u=e.sourceName;Promise.resolve().then(function(){return h[0].call(h[1],e.data)}).then(function(t){n.postMessage({sourceName:c,targetName:u,isReply:!0,callbackId:e.callbackId,data:t})},function(t){t instanceof Error&&(t+=""),n.postMessage({sourceName:c,targetName:u,isReply:!0,callbackId:e.callbackId,error:t})})}else h[0].call(h[1],e.data)}else s("Unknown action from worker: "+e.action)}.bind(this),n.addEventListener("message",this._onComObjOnMessage)}function F(t,e,n){var r=new Image;r.onload=function(){n.resolve(t,r)},r.onerror=function(){n.resolve(t,null),i("Error during JPEG image loading")},r.src=e}function U(t){var e=t;if(void 0===e)return"";"D:"===e.substring(0,2)&&(e=e.substring(2));var n=parseInt(e.substring(0,4),10),i=parseInt(e.substring(4,6),10)-1,r=parseInt(e.substring(6,8),10),s=parseInt(e.substring(8,10),10),o=parseInt(e.substring(10,12),10),a=parseInt(e.substring(12,14),10),h=e.substring(14,15),c=parseInt(e.substring(15,17),10),u=parseInt(e.substring(18,20),10);return"-"===h?(s+=c,o+=u):"+"===h&&(s-=c,o-=u),new Date(Date.UTC(n,i,r,s,o,a))}var B=e.PDFJS,H=e.globalScope,X=[.001,0,0,.001,0,0],G={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Y={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},q={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},V={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},K={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},W={UNKNOWN:0,FLATE:1,LZW:2,DCT:3,JPX:4,JBIG:5,A85:6,AHX:7,CCF:8,RL:9},J={UNKNOWN:0,TYPE1:1,TYPE1C:2,CIDFONTTYPE0:3,CIDFONTTYPE0C:4,TRUETYPE:5,CIDFONTTYPE2:6,TYPE3:7,OPENTYPE:8,TYPE0:9,MMTYPE1:10};B.VERBOSITY_LEVELS={errors:0,warnings:1,infos:5};var Q=B.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},z=B.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font"};B.getFilenameFromUrl=h,B.isValidUrl=l,B.addLinkAttributes=d,B.shadow=f;var Z=B.LinkTarget={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4},$=["","_self","_blank","_parent","_top"];B.isExternalLinkTargetSet=g;var tt=B.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},et=function(){function t(t,e){this.name="PasswordException",this.message=t,this.code=e}return t.prototype=new Error,t.constructor=t,t}();B.PasswordException=et;var nt=function(){function t(t,e){this.name="UnknownErrorException",this.message=t,this.details=e}return t.prototype=new Error,t.constructor=t,t}();B.UnknownErrorException=nt;var it=function(){function t(t){this.name="InvalidPDFException",this.message=t}return t.prototype=new Error,t.constructor=t,t}();B.InvalidPDFException=it;var rt=function(){function t(t){this.name="MissingPDFException",this.message=t}return t.prototype=new Error,t.constructor=t,t}();B.MissingPDFException=rt;var st=function(){function t(t,e){this.name="UnexpectedResponseException",this.message=t,this.status=e}return t.prototype=new Error,t.constructor=t,t}();B.UnexpectedResponseException=st;var ot=function(){function t(t){this.message=t}return t.prototype=new Error,t.prototype.name="NotImplementedException",t.constructor=t,t}(),at=function(){function t(t,e){this.begin=t,this.end=e,this.message="Missing data ["+t+", "+e+")"}return t.prototype=new Error,t.prototype.name="MissingDataException",t.constructor=t,t}(),ht=function(){function t(t){this.message=t}return t.prototype=new Error,t.prototype.name="XRefParseException",t.constructor=t,t}(),ct=/\x00/g;B.removeNullCharacters=m,Object.defineProperty(B,"isLittleEndian",{configurable:!0,get:function(){return f(B,"isLittleEndian",O())}}),Object.defineProperty(B,"hasCanvasTypedArrays",{configurable:!0,get:function(){return f(B,"hasCanvasTypedArrays",E())}});var ut=function(){function t(t,e){this.buffer=t,this.byteLength=t.length,this.length=void 0===e?this.byteLength>>2:e,n(this.length)}function e(t){return{get:function(){var e=this.buffer,n=t<<2;return(e[n]|e[n+1]<<8|e[n+2]<<16|e[n+3]<<24)>>>0},set:function(e){var n=this.buffer,i=t<<2;n[i]=255&e,n[i+1]=e>>8&255,n[i+2]=e>>16&255,n[i+3]=e>>>24&255}}}function n(n){for(;i<n;)Object.defineProperty(t.prototype,i,e(i)),i++}t.prototype=Object.create(null);var i=0;return t}();t.Uint32ArrayView=ut;var lt=[1,0,0,1,0,0],dt=B.Util=function(){function t(){}var e=["rgb(",0,",",0,",",0,")"];t.makeCssRgb=function(t,n,i){return e[1]=t,e[3]=n,e[5]=i,e.join("")},t.transform=function(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]},t.applyTransform=function(t,e){var n=t[0]*e[0]+t[1]*e[2]+e[4],i=t[0]*e[1]+t[1]*e[3]+e[5];return[n,i]},t.applyInverseTransform=function(t,e){var n=e[0]*e[3]-e[1]*e[2],i=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/n,r=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/n;return[i,r]},t.getAxialAlignedBoundingBox=function(e,n){var i=t.applyTransform(e,n),r=t.applyTransform(e.slice(2,4),n),s=t.applyTransform([e[0],e[3]],n),o=t.applyTransform([e[2],e[1]],n);return[Math.min(i[0],r[0],s[0],o[0]),Math.min(i[1],r[1],s[1],o[1]),Math.max(i[0],r[0],s[0],o[0]),Math.max(i[1],r[1],s[1],o[1])]},t.inverseTransform=function(t){var e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]},t.apply3dTransform=function(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2],t[3]*e[0]+t[4]*e[1]+t[5]*e[2],t[6]*e[0]+t[7]*e[1]+t[8]*e[2]]},t.singularValueDecompose2dScale=function(t){var e=[t[0],t[2],t[1],t[3]],n=t[0]*e[0]+t[1]*e[2],i=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2],s=t[2]*e[1]+t[3]*e[3],o=(n+s)/2,a=Math.sqrt((n+s)*(n+s)-4*(n*s-r*i))/2,h=o+a||1,c=o-a||1;return[Math.sqrt(h),Math.sqrt(c)]},t.normalizeRect=function(t){var e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e},t.intersect=function(e,n){function i(t,e){return t-e}var r=[e[0],e[2],n[0],n[2]].sort(i),s=[e[1],e[3],n[1],n[3]].sort(i),o=[];return e=t.normalizeRect(e),n=t.normalizeRect(n),(r[0]===e[0]&&r[1]===n[0]||r[0]===n[0]&&r[1]===e[0])&&(o[0]=r[1],o[2]=r[2],(s[0]===e[1]&&s[1]===n[1]||s[0]===n[1]&&s[1]===e[1])&&(o[1]=s[1],o[3]=s[2],o))},t.sign=function(t){return t<0?-1:1};var n=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];return t.toRoman=function(t,e){a(C(t)&&t>0,"The number should be a positive integer.");for(var i,r=[];t>=1e3;)t-=1e3,r.push("M");i=t/100|0,t%=100,r.push(n[i]),i=t/10|0,t%=10,r.push(n[10+i]),r.push(n[20+t]);var s=r.join("");return e?s.toLowerCase():s},t.appendToArray=function(t,e){Array.prototype.push.apply(t,e)},t.prependToArray=function(t,e){Array.prototype.unshift.apply(t,e)},t.extendObj=function(t,e){for(var n in e)t[n]=e[n]},t.getInheritableProperty=function(t,e){for(;t&&!t.has(e);)t=t.get("Parent");return t?t.get(e):null},t.inherit=function(t,e,n){t.prototype=Object.create(e.prototype),t.prototype.constructor=t;for(var i in n)t.prototype[i]=n[i]},t.loadScript=function(t,e){var n=document.createElement("script"),i=!1;n.setAttribute("src",t),e&&(n.onload=function(){i||e(),i=!0}),document.getElementsByTagName("head")[0].appendChild(n)},t}(),ft=(B.PageViewport=function(){function t(t,e,n,i,r,s){this.viewBox=t,this.scale=e,this.rotation=n,this.offsetX=i,this.offsetY=r;var o,a,h,c,u=(t[2]+t[0])/2,l=(t[3]+t[1])/2;switch(n%=360,n=n<0?n+360:n){case 180:o=-1,a=0,h=0,c=1;break;case 90:o=0,a=1,h=1,c=0;break;case 270:o=0,a=-1,h=-1,c=0;break;default:o=1,a=0,h=0,c=-1}s&&(h=-h,c=-c);var d,f,p,g;0===o?(d=Math.abs(l-t[1])*e+i,f=Math.abs(u-t[0])*e+r,p=Math.abs(t[3]-t[1])*e,g=Math.abs(t[2]-t[0])*e):(d=Math.abs(u-t[0])*e+i,f=Math.abs(l-t[1])*e+r,p=Math.abs(t[2]-t[0])*e,g=Math.abs(t[3]-t[1])*e),this.transform=[o*e,a*e,h*e,c*e,d-o*e*u-h*e*l,f-a*e*u-c*e*l],this.width=p,this.height=g,this.fontScale=e}return t.prototype={clone:function(e){e=e||{};var n="scale"in e?e.scale:this.scale,i="rotation"in e?e.rotation:this.rotation;return new t(this.viewBox.slice(),n,i,this.offsetX,this.offsetY,e.dontFlip)},convertToViewportPoint:function(t,e){return dt.applyTransform([t,e],this.transform)},convertToViewportRectangle:function(t){var e=dt.applyTransform([t[0],t[1]],this.transform),n=dt.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],n[0],n[1]]},convertToPdfPoint:function(t,e){return dt.applyInverseTransform([t,e],this.transform)}},t}(),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364]);B.createPromiseCapability=A,function(){function t(t){this._status=e,this._handlers=[];try{t.call(this,this._resolve.bind(this),this._reject.bind(this))}catch(n){this._reject(n)}}if(H.Promise)return"function"!=typeof H.Promise.all&&(H.Promise.all=function(t){var e,n,i=0,r=[],s=new H.Promise(function(t,i){e=t,n=i});return t.forEach(function(t,s){i++,t.then(function(t){r[s]=t,i--,0===i&&e(r)},n)}),0===i&&e(r),s}),"function"!=typeof H.Promise.resolve&&(H.Promise.resolve=function(t){return new H.Promise(function(e){e(t)})}),"function"!=typeof H.Promise.reject&&(H.Promise.reject=function(t){return new H.Promise(function(e,n){n(t)})}),void("function"!=typeof H.Promise.prototype["catch"]&&(H.Promise.prototype["catch"]=function(t){return H.Promise.prototype.then(void 0,t)}));var e=0,n=1,r=2,s=500,o={handlers:[],running:!1,unhandledRejections:[],pendingRejectionCheck:!1,scheduleHandlers:function(t){t._status!==e&&(this.handlers=this.handlers.concat(t._handlers),t._handlers=[],this.running||(this.running=!0,setTimeout(this.runHandlers.bind(this),0)))},runHandlers:function(){for(var t=1,e=Date.now()+t;this.handlers.length>0;){var i=this.handlers.shift(),s=i.thisPromise._status,o=i.thisPromise._value;try{s===n?"function"==typeof i.onResolve&&(o=i.onResolve(o)):"function"==typeof i.onReject&&(o=i.onReject(o),s=n,i.thisPromise._unhandledRejection&&this.removeUnhandeledRejection(i.thisPromise))}catch(a){s=r,o=a}if(i.nextPromise._updateStatus(s,o),Date.now()>=e)break}return this.handlers.length>0?void setTimeout(this.runHandlers.bind(this),0):void(this.running=!1)},addUnhandledRejection:function(t){this.unhandledRejections.push({promise:t,time:Date.now()}),this.scheduleRejectionCheck()},removeUnhandeledRejection:function(t){t._unhandledRejection=!1;for(var e=0;e<this.unhandledRejections.length;e++)this.unhandledRejections[e].promise===t&&(this.unhandledRejections.splice(e),e--)},scheduleRejectionCheck:function(){this.pendingRejectionCheck||(this.pendingRejectionCheck=!0,setTimeout(function(){this.pendingRejectionCheck=!1;for(var t=Date.now(),e=0;e<this.unhandledRejections.length;e++)if(t-this.unhandledRejections[e].time>s){var n=this.unhandledRejections[e].promise._value,r="Unhandled rejection: "+n;n.stack&&(r+="\n"+n.stack),i(r),this.unhandledRejections.splice(e),e--}this.unhandledRejections.length&&this.scheduleRejectionCheck()}.bind(this),s))}};t.all=function(e){function n(t){o._status!==r&&(h=[],s(t))}var i,s,o=new t(function(t,e){i=t,s=e}),a=e.length,h=[];if(0===a)return i(h),o;for(var c=0,u=e.length;c<u;++c){var l=e[c],d=function(t){return function(e){o._status!==r&&(h[t]=e,a--,0===a&&i(h))}}(c);t.isPromise(l)?l.then(d,n):d(l)}return o},t.isPromise=function(t){return t&&"function"==typeof t.then},t.resolve=function(e){return new t(function(t){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.prototype={_status:null,_value:null,_handlers:null,_unhandledRejection:null,_updateStatus:function(e,i){if(this._status!==n&&this._status!==r){if(e===n&&t.isPromise(i))return void i.then(this._updateStatus.bind(this,n),this._updateStatus.bind(this,r));this._status=e,this._value=i,e===r&&0===this._handlers.length&&(this._unhandledRejection=!0,o.addUnhandledRejection(this)),o.scheduleHandlers(this)}},_resolve:function(t){this._updateStatus(n,t)},_reject:function(t){this._updateStatus(r,t)},then:function(e,n){var i=new t(function(t,e){this.resolve=t,this.reject=e});return this._handlers.push({thisPromise:this,onResolve:e,onReject:n,nextPromise:i}),o.scheduleHandlers(this),i},"catch":function(t){return this.then(void 0,t)}},H.Promise=t}();var pt=function(){function t(t,e,n){for(;t.length<n;)t+=e;return t}function e(){this.started=Object.create(null),this.times=[],this.enabled=!0}return e.prototype={time:function(t){this.enabled&&(t in this.started&&i("Timer is already running for "+t),this.started[t]=Date.now())},timeEnd:function(t){this.enabled&&(t in this.started||i("Timer has not been started for "+t),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t])},toString:function(){var e,n,i=this.times,r="",s=0;for(e=0,n=i.length;e<n;++e){var o=i[e].name;o.length>s&&(s=o.length)}for(e=0,n=i.length;e<n;++e){var a=i[e],h=a.end-a.start;r+=t(a.name," ",s)+" "+h+"ms\n"}return r}},e}();B.createBlob=function(t,e){if("undefined"!=typeof Blob)return new Blob([t],{type:e});var n=new MozBlobBuilder;return n.append(t),n.getBlob(e)},B.createObjectURL=function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function(e,n){if(!B.disableCreateObjectURL&&"undefined"!=typeof URL&&URL.createObjectURL){var i=B.createBlob(e,n);return URL.createObjectURL(i)}for(var r="data:"+n+";base64,",s=0,o=e.length;s<o;s+=3){var a=255&e[s],h=255&e[s+1],c=255&e[s+2],u=a>>2,l=(3&a)<<4|h>>4,d=s+1<o?(15&h)<<2|c>>6:64,f=s+2<o?63&c:64;r+=t[u]+t[l]+t[d]+t[f]}return r}}(),N.prototype={on:function(t,e,n){var i=this.actionHandler;i[t]&&s('There is already an actionName called "'+t+'"'),i[t]=[e,n]},send:function(t,e,n){var i={sourceName:this.sourceName,targetName:this.targetName,action:t,data:e};this.postMessage(i,n)},sendWithPromise:function(t,e,n){var i=this.callbackIndex++,r={sourceName:this.sourceName,targetName:this.targetName,action:t,data:e,callbackId:i},s=A();this.callbacksCapabilities[i]=s;try{this.postMessage(r,n)}catch(o){s.reject(o)}return s.promise},postMessage:function(t,e){e&&this.postMessageTransfers?this.comObj.postMessage(t,e):this.comObj.postMessage(t)},destroy:function(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}},function(t){function e(t){return void 0!==d[t]}function n(){a.call(this),this._isInvalid=!0}function i(t){return""==t&&n.call(this),t.toLowerCase()}function r(t){var e=t.charCodeAt(0);return e>32&&e<127&&[34,35,60,62,63,96].indexOf(e)==-1?t:encodeURIComponent(t)}function s(t){var e=t.charCodeAt(0);return e>32&&e<127&&[34,35,60,62,96].indexOf(e)==-1?t:encodeURIComponent(t)}function o(t,o,a){function h(t){_.push(t)}var c=o||"scheme start",u=0,l="",v=!1,y=!1,_=[];t:for(;(t[u-1]!=p||0==u)&&!this._isInvalid;){var b=t[u];switch(c){case"scheme start":if(!b||!g.test(b)){if(o){h("Invalid scheme.");break t}l="",c="no scheme";continue}l+=b.toLowerCase(),c="scheme";break;case"scheme":if(b&&m.test(b))l+=b.toLowerCase();else{if(":"!=b){if(o){if(p==b)break t;h("Code point not allowed in scheme: "+b);break t}l="",u=0,c="no scheme";continue}if(this._scheme=l,l="",o)break t;e(this._scheme)&&(this._isRelative=!0),c="file"==this._scheme?"relative":this._isRelative&&a&&a._scheme==this._scheme?"relative or authority":this._isRelative?"authority first slash":"scheme data"}break;case"scheme data":"?"==b?(this._query="?",c="query"):"#"==b?(this._fragment="#",c="fragment"):p!=b&&"\t"!=b&&"\n"!=b&&"\r"!=b&&(this._schemeData+=r(b));break;case"no scheme":if(a&&e(a._scheme)){c="relative";continue}h("Missing scheme."),n.call(this);break;case"relative or authority":if("/"!=b||"/"!=t[u+1]){h("Expected /, got: "+b),c="relative";continue}c="authority ignore slashes";break;case"relative":if(this._isRelative=!0,"file"!=this._scheme&&(this._scheme=a._scheme),p==b){this._host=a._host,this._port=a._port,this._path=a._path.slice(),this._query=a._query,this._username=a._username,this._password=a._password;break t}if("/"==b||"\\"==b)"\\"==b&&h("\\ is an invalid code point."),c="relative slash";else if("?"==b)this._host=a._host,this._port=a._port,this._path=a._path.slice(),this._query="?",this._username=a._username,this._password=a._password,c="query";else{if("#"!=b){var T=t[u+1],I=t[u+2];("file"!=this._scheme||!g.test(b)||":"!=T&&"|"!=T||p!=I&&"/"!=I&&"\\"!=I&&"?"!=I&&"#"!=I)&&(this._host=a._host,this._port=a._port,this._username=a._username,this._password=a._password,this._path=a._path.slice(),this._path.pop()),c="relative path";continue}this._host=a._host,this._port=a._port,this._path=a._path.slice(),this._query=a._query,this._fragment="#",this._username=a._username,this._password=a._password,c="fragment"}break;case"relative slash":if("/"!=b&&"\\"!=b){"file"!=this._scheme&&(this._host=a._host,this._port=a._port,this._username=a._username,this._password=a._password),c="relative path";continue}"\\"==b&&h("\\ is an invalid code point."),c="file"==this._scheme?"file host":"authority ignore slashes";break;case"authority first slash":if("/"!=b){h("Expected '/', got: "+b),c="authority ignore slashes";continue}c="authority second slash";break;case"authority second slash":if(c="authority ignore slashes","/"!=b){h("Expected '/', got: "+b);continue}break;case"authority ignore slashes":if("/"!=b&&"\\"!=b){c="authority";continue}h("Expected authority, got: "+b);break;case"authority":if("@"==b){v&&(h("@ already seen."),l+="%40"),v=!0;for(var x=0;x<l.length;x++){var O=l[x];if("\t"!=O&&"\n"!=O&&"\r"!=O)if(":"!=O||null!==this._password){var E=r(O);null!==this._password?this._password+=E:this._username+=E}else this._password="";else h("Invalid whitespace in authority.")}l=""}else{if(p==b||"/"==b||"\\"==b||"?"==b||"#"==b){u-=l.length,l="",c="host";continue}l+=b}break;case"file host":if(p==b||"/"==b||"\\"==b||"?"==b||"#"==b){2!=l.length||!g.test(l[0])||":"!=l[1]&&"|"!=l[1]?0==l.length?c="relative path start":(this._host=i.call(this,l),l="",c="relative path start"):c="relative path";continue}"\t"==b||"\n"==b||"\r"==b?h("Invalid whitespace in file host."):l+=b;break;case"host":case"hostname":if(":"!=b||y){if(p==b||"/"==b||"\\"==b||"?"==b||"#"==b){if(this._host=i.call(this,l),l="",c="relative path start",o)break t;continue}"\t"!=b&&"\n"!=b&&"\r"!=b?("["==b?y=!0:"]"==b&&(y=!1),l+=b):h("Invalid code point in host/hostname: "+b)}else if(this._host=i.call(this,l),l="",c="port","hostname"==o)break t;break;case"port":if(/[0-9]/.test(b))l+=b;else{if(p==b||"/"==b||"\\"==b||"?"==b||"#"==b||o){if(""!=l){var w=parseInt(l,10);w!=d[this._scheme]&&(this._port=w+""),l=""}if(o)break t;c="relative path start";continue}"\t"==b||"\n"==b||"\r"==b?h("Invalid code point in port: "+b):n.call(this)}break;case"relative path start":if("\\"==b&&h("'\\' not allowed in path."),c="relative path","/"!=b&&"\\"!=b)continue;break;case"relative path":if(p!=b&&"/"!=b&&"\\"!=b&&(o||"?"!=b&&"#"!=b))"\t"!=b&&"\n"!=b&&"\r"!=b&&(l+=r(b));else{"\\"==b&&h("\\ not allowed in relative path.");var R;(R=f[l.toLowerCase()])&&(l=R),".."==l?(this._path.pop(),"/"!=b&&"\\"!=b&&this._path.push("")):"."==l&&"/"!=b&&"\\"!=b?this._path.push(""):"."!=l&&("file"==this._scheme&&0==this._path.length&&2==l.length&&g.test(l[0])&&"|"==l[1]&&(l=l[0]+":"),this._path.push(l)),l="","?"==b?(this._query="?",c="query"):"#"==b&&(this._fragment="#",c="fragment")}break;case"query":o||"#"!=b?p!=b&&"\t"!=b&&"\n"!=b&&"\r"!=b&&(this._query+=s(b)):(this._fragment="#",c="fragment");break;case"fragment":p!=b&&"\t"!=b&&"\n"!=b&&"\r"!=b&&(this._fragment+=b)}u++}}function a(){this._scheme="",this._schemeData="",this._username="",this._password=null,this._host="",this._port="",this._path=[],this._query="",this._fragment="",this._isInvalid=!1,this._isRelative=!1}function h(t,e){void 0===e||e instanceof h||(e=new h(String(e))),t=null==t?"":t.toString(),this._url=t,a.call(this);var n=t.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,"");o.call(this,n,null,e)}var c=!1;try{if("function"==typeof URL&&"object"==typeof URL.prototype&&"origin"in URL.prototype){var u=new URL("b","http://a");u.pathname="c%20d",c="http://a/c%20d"===u.href}}catch(l){}if(!c){var d=Object.create(null);d.ftp=21,d.file=0,d.gopher=70,d.http=80,d.https=443,d.ws=80,d.wss=443;var f=Object.create(null);f["%2e"]=".",f[".%2e"]="..",f["%2e."]="..",f["%2e%2e"]="..";var p=void 0,g=/[a-zA-Z]/,m=/[a-zA-Z0-9\+\-\.]/;h.prototype={toString:function(){return this.href},get href(){if(this._isInvalid)return this._url;var t="";return""==this._username&&null==this._password||(t=this._username+(null!=this._password?":"+this._password:"")+"@"),this.protocol+(this._isRelative?"//"+t+this.host:"")+this.pathname+this._query+this._fragment},set href(t){a.call(this),o.call(this,t)},get protocol(){return this._scheme+":"},set protocol(t){this._isInvalid||o.call(this,t+":","scheme start")},get host(){return this._isInvalid?"":this._port?this._host+":"+this._port:this._host},set host(t){!this._isInvalid&&this._isRelative&&o.call(this,t,"host")},get hostname(){return this._host},set hostname(t){!this._isInvalid&&this._isRelative&&o.call(this,t,"hostname")},get port(){return this._port},set port(t){!this._isInvalid&&this._isRelative&&o.call(this,t,"port")},get pathname(){return this._isInvalid?"":this._isRelative?"/"+this._path.join("/"):this._schemeData},set pathname(t){!this._isInvalid&&this._isRelative&&(this._path=[],o.call(this,t,"relative path start"))},get search(){return this._isInvalid||!this._query||"?"==this._query?"":this._query},set search(t){!this._isInvalid&&this._isRelative&&(this._query="?","?"==t[0]&&(t=t.slice(1)),o.call(this,t,"query"))},get hash(){return this._isInvalid||!this._fragment||"#"==this._fragment?"":this._fragment},set hash(t){this._isInvalid||(this._fragment="#","#"==t[0]&&(t=t.slice(1)),o.call(this,t,"fragment"))},get origin(){var t;if(this._isInvalid||!this._scheme)return"";switch(this._scheme){case"data":case"file":case"javascript":case"mailto":return"null"}return t=this.host,t?this._scheme+"://"+t:""}};var v=t.URL;v&&(h.createObjectURL=function(t){return v.createObjectURL.apply(v,arguments)},h.revokeObjectURL=function(t){v.revokeObjectURL(t)}),t.URL=h}}(H),function(){if(!("btoa"in H)){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";H.btoa=function(e){var n,i,r="";for(n=0,i=e.length;n<i;n+=3){var s=255&e.charCodeAt(n),o=255&e.charCodeAt(n+1),a=255&e.charCodeAt(n+2),h=s>>2,c=(3&s)<<4|o>>4,u=n+1<i?(15&o)<<2|a>>6:64,l=n+2<i?63&a:64;r+=t.charAt(h)+t.charAt(c)+t.charAt(u)+t.charAt(l)}return r}}}(),function(){if(!("atob"in H)){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";H.atob=function(e){if(e=e.replace(/=+$/,""),e.length%4===1)throw new Error("bad atob input");for(var n,i,r=0,s=0,o="";i=e.charAt(s++);~i&&(n=r%4?64*n+i:i,r++%4)?o+=String.fromCharCode(255&n>>(-2*r&6)):0)i=t.indexOf(i);return o}}}(),t.FONT_IDENTITY_MATRIX=X,t.IDENTITY_MATRIX=lt,t.OPS=Q,t.UNSUPPORTED_FEATURES=z,t.AnnotationBorderStyleType=K,t.AnnotationFlag=V,t.AnnotationType=q,t.FontType=J,t.ImageKind=Y,t.InvalidPDFException=it,t.LinkTarget=Z,t.LinkTargetStringMap=$,t.MessageHandler=N,t.MissingDataException=at,t.MissingPDFException=rt,t.NotImplementedException=ot,t.PasswordException=et,t.PasswordResponses=tt,t.StatTimer=pt,t.StreamType=W,t.TextRenderingMode=G,t.UnexpectedResponseException=st,t.UnknownErrorException=nt,t.Util=dt,t.XRefParseException=ht,t.assert=a,t.bytesToString=v,t.combineUrl=c,t.createPromiseCapability=A,t.deprecated=r,t.error=s,t.getFilenameFromUrl=h,t.getLookupTableFactory=p,t.info=n,t.isArray=M,t.isArrayBuffer=D,t.isBool=L,t.isEmptyObj=P,t.isExternalLinkTargetSet=g,t.isInt=C,t.isNum=S,t.isString=k,t.isSameOrigin=u,t.isValidUrl=l,t.addLinkAttributes=d,t.loadJpegStream=F,t.log2=b,t.readInt8=T,t.readUint16=I,t.readUint32=x,t.removeNullCharacters=m,t.shadow=f,t.string32=_,t.stringToBytes=y,t.stringToPDFString=w,t.stringToUTF8String=R,t.utf8StringToString=j,t.warn=i,t.parseDate=U}),function(t,e){"function"==typeof define&&define.amd?define("pdfjs/core/quadtree",["exports"],e):e("undefined"!=typeof exports?exports:t.pdfjsQuadtree={})}(this,function(t){t.QuadTree=function(){function t(t,n,i){this.root=new e(t,0,n,i),this.length=0}function e(t,e,n,i){this.bounds=t,this.children=[],this.nodes=null,this.maxChildren=i||4,this.maxDepth=n||4,this.depth=e||0}function n(t,e,n,i,r,s){this.indices=t.findIndices(e),this.quad=t,this.side1=i,this.side2=r,this.item=e,this.sorter=n,this.deduper=s,this.didSide2=!1,this.buildIterators(this.side1),this.lastIt0=null,this.lastIt1=null}function i(t,e,n){return this.children=e,this.childrenLen=e.length,this.itX1=t.x,this.itY1=t.y,this.itX2=t.x+t.width,this.itY2=t.y+t.height,this.ci=0,this.deduper=n,this}return t.prototype.root=null,t.prototype.length=0,t.prototype.insert=function(t){if(!(t instanceof Array)){var e=this.root.bounds;return!(t.x>=e.x+e.width||t.x+t.width<=e.x||t.y>=e.y+e.height||t.y+t.height<=e.y)&&(this.root.insert(t),this.length++,!0)}for(var n=0,i=t.length;n<i;n++)this.insert(t[n])},t.prototype.print=function(){var t=this.root.print();console.log("QuadTree: "+this.length+" objects. "+t+" leafs.")},t.prototype.retrieve=function(t){return this.root.retrieve(t,[],{})},
t.prototype.retrieveXInc=function(t,n,i){var r={x:t,y:n,height:i,width:this.root.bounds.width-t},s=function(t,e){return t.x<e.x?-1:t.x>e.x?1:0},o=[e.TOP_LEFT,e.BOTTOM_LEFT],a=[e.TOP_RIGHT,e.BOTTOM_RIGHT];return this.root.retrieveIterate(r,s,o,a,{})},t.prototype.retrieveXDec=function(t,n,i){var r=this.root.bounds.x,s={x:r,y:n,height:i,width:t-r},o=function(t,e){var n=t.x+t.width,i=e.x+e.width;return n<i?1:n>i?-1:0},a=[e.TOP_RIGHT,e.BOTTOM_RIGHT],h=[e.TOP_LEFT,e.BOTTOM_LEFT];return this.root.retrieveIterate(s,o,a,h,{})},t.prototype.retrieveYInc=function(t,n,i){var r={x:t,y:n,width:i,height:this.root.bounds.height-n},s=function(t,e){return t.y<e.y?-1:t.y>e.y?1:0},o=[e.TOP_LEFT,e.TOP_RIGHT],a=[e.BOTTOM_LEFT,e.BOTTOM_RIGHT];return this.root.retrieveIterate(r,s,o,a,{})},t.prototype.retrieveYDec=function(t,n,i){var r=this.root.bounds.y,s={x:t,y:r,width:i,height:n-r},o=function(t,e){var n=t.y+t.height,i=e.y+e.height;return n<i?1:n>i?-1:0},a=[e.BOTTOM_LEFT,e.BOTTOM_RIGHT],h=[e.TOP_LEFT,e.TOP_RIGHT];return this.root.retrieveIterate(s,o,a,h,{})},e.TOP_LEFT=0,e.TOP_RIGHT=1,e.BOTTOM_LEFT=2,e.BOTTOM_RIGHT=3,e.prototype.print=function(){for(var t="",n=0;n<this.depth;n++)t+=" ";if(null!==this.nodes){var i={},r=0;i[e.TOP_LEFT]="TOP_LEFT",i[e.TOP_RIGHT]="TOP_RIGHT",i[e.BOTTOM_LEFT]="BOTTOM_LEFT",i[e.BOTTOM_RIGHT]="BOTTOM_RIGHT";for(var s=0;s<this.nodes.length;s++)console.log(t+"Depth "+this.depth+" "+i[s]),r+=this.nodes[s].print();return r}return console.log(t+"Leaf with "+this.children.length+" elements."),this.children.length},e.prototype.insert=function(t){if(null===this.nodes){if(this.children.push(t),this.children.length>=this.maxChildren&&this.depth<this.maxDepth){this.subdivide();for(var e=this.children.length,n=0;n<e;n++)this.insert(this.children[n]);this.children=null}}else for(var i in this.findIndices(t))this.nodes[i].insert(t)},e.prototype.findIndices=function(t){var n=this.bounds,i=n.x+(n.width/2|0),r=n.y+(n.height/2|0),s={},o=!1;if(t.y<r){t.x<i?(s[e.TOP_LEFT]=!0,t.x+t.width>=i&&(s[e.TOP_RIGHT]=!0)):s[e.TOP_RIGHT]=!0}else o=!0;return(o||t.y+t.height>=r)&&(t.x<i?(s[e.BOTTOM_LEFT]=!0,t.x+t.width>=i&&(s[e.BOTTOM_RIGHT]=!0)):s[e.BOTTOM_RIGHT]=!0),s},e.prototype.subdivide=function(){var t=this.depth+1,n=this.bounds.x,i=this.bounds.y,r=this.bounds.width/2|0,s=this.bounds.height/2|0,o=n+r,a=i+s;this.nodes=[new e({x:n,y:i,width:r,height:s},t,this.maxDepth,this.maxChildren),new e({x:o,y:i,width:r,height:s},t,this.maxDepth,this.maxChildren),new e({x:n,y:a,width:r,height:s},t,this.maxDepth,this.maxChildren),new e({x:o,y:a,width:r,height:s},t,this.maxDepth,this.maxChildren)]},e.prototype.retrieve=function(t,e,n){if(this.nodes){for(var i in this.findIndices(t))this.nodes[i].retrieve(t,e,n);return e}for(var r=this.children.length,s=t.x+t.width,o=t.y+t.height,a=0;a<r;a++){var h=this.children[a];t.x<h.x+h.width&&t.y<h.y+h.height&&s>h.x&&o>h.y&&!(h.id in n)&&(n[h.id]=!0,e.push(h))}return e},e.prototype.retrieveIterate=function(t,e,r,s,o){return this.nodes?new n(this,t,e,r,s,o):(this.children.sort(e),new i(t,this.children,o))},n.prototype.buildIterators=function(t){this.it0=this.indices[t[0]]?this.quad.nodes[t[0]].retrieveIterate(this.item,this.sorter,this.side1,this.side2,this.deduper):null,this.it1=this.indices[t[1]]?this.quad.nodes[t[1]].retrieveIterate(this.item,this.sorter,this.side1,this.side2,this.deduper):null},n.prototype.next=function(){this.it0&&!this.lastIt0&&(this.lastIt0=this.it0.next()),this.it1&&!this.lastIt1&&(this.lastIt1=this.it1.next());var t;return this.lastIt0&&this.lastIt1?(this.sorter(this.lastIt0,this.lastIt1)<=0?(t=this.lastIt0,this.lastIt0=null):(t=this.lastIt1,this.lastIt1=null),t):this.lastIt0?(t=this.lastIt0,this.lastIt0=null,t):this.lastIt1?(t=this.lastIt1,this.lastIt1=null,t):this.didSide2?null:(this.buildIterators(this.side2),this.didSide2=!0,this.next())},n.prototype.debugPrint=function(t){void 0===t&&(t=0);var e=new Array(t+2).join(" ");console.log(e+"Node Iterator depth "+t+": "+(this.it0?"with it0 ":"")+(this.it1?"with it1 ":"")),console.log(e+"-> "+this.side1+" | "+this.side2),this.it0&&this.it0.debugPrint(t+1),this.it1&&this.it1.debugPrint(t+1)},i.prototype.next=function(){for(;this.ci<this.childrenLen;){var t=this.children[this.ci];if(this.ci++,this.itX1<t.x+t.width&&this.itY1<t.y+t.height&&this.itX2>t.x&&this.itY2>t.y&&!(t.id in this.deduper))return this.deduper[t.id]=!0,t}return null},i.prototype.debugPrint=function(t){void 0===t&&(t=0);var e=new Array(t).join(" ");console.log(e+"LeafIterator depth "+t+": "+this.children.length+" items")},t}()}),function(t,e){"function"==typeof define&&define.amd?define("pdfjs/core/text_layout_evaluator",["exports","pdfjs/core/quadtree"],e):"undefined"!=typeof exports?e(exports,require("./quadtree.js")):e(t.pdfjsTextLayoutEvaluator={},t.pdfjsQuadtree)}(this,function(t,e){var n=e.QuadTree,i=function(){function t(){}return t.prototype={addToQuadTree:function(t,e,n,i){function r(t,e){var n=o[4],i=o[5];return{x:n+(t-n)*Math.cos(a)+(e-i)*Math.sin(a),y:i-(t-n)*Math.sin(a)+(e-i)*Math.cos(a)}}var s=i[e.fontName],o=e.transform,a=Math.atan2(o[1],o[0]);s.vertical&&(a+=Math.PI/2);var h=Math.sqrt(o[2]*o[2]+o[3]*o[3]),c=h;s.ascent?c=s.ascent*c:s.descent&&(c=(1+s.descent)*c),e.x=o[4],e.y=o[5];var u=1e-5;if(Math.abs(a)<u)e.x1=e.x,e.x2=e.x+e.width,e.y1=e.y,e.y2=e.y+e.height;else{var l=r(e.x+e.width,e.y+e.height),d=r(e.x+e.width,e.y),f=r(e.x,e.y+e.height);e.x1=Math.min(e.x,l.x,d.x,f.x),e.x2=Math.max(e.x,l.x,d.x,f.x),e.y1=Math.min(e.y,l.y,d.y,f.y),e.y2=Math.max(e.y,l.y,d.y,f.y)}e.vertical=s.vertical,e.id=n,e.right=null,e.bottom=null,e.left=null,e.top=null,t.insert({x:e.x1,y:e.y1,width:e.x2-e.x1,height:e.y2-e.y1,id:n})},calculateTextFlow:function(t,e,i){for(var r,s,o,a=new n(t,4,16),h=0,c=e.length;h<c;h++)this.addToQuadTree(a,e[h],h,i);for(h=0;h<c;h++){s=e[h];var u=s.y2;for(r=a.retrieveYDec(s.x1,u,s.x2-s.x1);o=r.next();)if(o.id!==s.id&&o.y<s.y1){s.bottom=o.id;break}for(r=a.retrieveYInc(s.x1,s.y1,s.x2-s.x1);o=r.next();)if(o.id!==s.id&&o.y+o.height>u){s.top=o.id;break}}a=void 0;var l=new n(t,4,16);for(h=0;h<c;h++)s=e[h],s.fullHeight=s.y2-s.y1,null===s.bottom?(s.fullY1=t.y,s.fullHeight+=s.y1-t.y):e[s.bottom].y2<=s.y1?(s.fullY1=e[s.bottom].y2,s.fullHeight+=s.y1-s.fullY1):(s.fullY1=s.y1,s.fullHeight=s.y2-s.y1),void 0!==s.top&&null!==s.top||(s.fullHeight=t.height-s.fullY1),l.insert({x:s.x1,y:s.fullY1,width:s.x2-s.x1,height:s.fullHeight,id:s.id});for(h=0;h<c;h++){s=e[h];var d=s.x2;for(r=l.retrieveXInc(s.x,s.fullY1,s.fullHeight);o=r.next();)if(o.id!==s.id&&o.x+o.width>d){s.right=o.id;break}for(r=l.retrieveXDec(d,s.fullY1,s.fullHeight);o=r.next();)if(o.id!==s.id&&o.x<s.x){s.left=o.id;break}s.fullY1=void 0,s.fullHeight=void 0}}},t}();t.TextLayoutEvaluator=i});
//# sourceMappingURL=https://notable-web.herokuapp.com/web/srcmaps/notable_worker.js.map
